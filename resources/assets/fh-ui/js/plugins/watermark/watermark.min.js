(function(e,a){if(typeof define==="function"&&define.amd){define([],a())}else if(typeof module==="object"&&module.exports){module.exports=a()}else{e["watermark"]=a()}})(this,function(){var e={};var a=function(e){var a={watermark_id:"wm_div_id",watermark_zIndex:"999999",watermark_prefix:"mask_div_id",watermark_txt:"测试水印",watermark_x:20,watermark_y:20,watermark_rows:0,watermark_cols:0,watermark_x_space:100,watermark_y_space:50,watermark_font:"微软雅黑",watermark_color:"black",watermark_fontsize:"18px",watermark_alpha:.15,watermark_width:100,watermark_height:100,watermark_angle:15,watermark_parent_width:0,watermark_parent_height:0,watermark_parent_node:null};if(arguments.length===1&&typeof arguments[0]==="object"){var t=arguments[0]||{};for(key in t){if(t[key]&&a[key]&&t[key]===a[key])continue;else if(t[key]||t[key]===0)a[key]=t[key]}}var r=document.getElementById(a.watermark_id);if(r){var o=r.parentNode;if(o){o.removeChild(r)}}var m=Math.max(document.body.scrollWidth,document.body.clientWidth)-a.watermark_width/2;var w=Math.max(document.body.scrollHeight,document.body.clientHeight,document.documentElement.clientHeight)-a.watermark_height/2;var i=arguments[0]||{};var n=a.watermark_parent_node;var _=0;var k=0;if(i.watermark_parent_width||i.watermark_parent_height){i.watermark_parent_width?m=i.watermark_parent_width-a.watermark_width/2:a.watermark_parent_node?m=n.offsetWidth-a.watermark_width/2:void 0;i.watermark_parent_height?w=i.watermark_parent_height-a.watermark_height/2:a.watermark_parent_node?w=Math.max(n.offsetHeight,n.scrollHeight)-a.watermark_height/2:void 0;if(n){_=$(n).offset().top||0;k=$(n).offset().left||0;a.watermark_x=a.watermark_x+k;a.watermark_y=a.watermark_y+_}}else{if(n){_=$(n).offset().top||0;k=$(n).offset().left||0;m=n.offsetWidth-a.watermark_width/2||0;w=Math.max(n.offsetHeight,n.scrollHeight)-a.watermark_height/2||0;a.watermark_x=a.watermark_x+k;a.watermark_y=a.watermark_y+_}}var d=document.getElementById(a.watermark_id);var s=null;if(!d){d=document.createElement("div");d.id=a.watermark_id;d.setAttribute("class","wm_div_class");d.style.pointerEvents="none";if(typeof d.createShadowRoot==="function"){s=d.createShadowRoot()}else{s=d}var l=document.body.children;var h=Math.floor(Math.random()*(l.length-1));if(l[h]){document.body.insertBefore(d,l[h])}else{document.body.appendChild(d)}}else if(d.shadowRoot){s=d.shadowRoot}if(a.watermark_cols==0||parseInt(a.watermark_x+a.watermark_width*a.watermark_cols+a.watermark_x_space*(a.watermark_cols-1))>m){a.watermark_cols=parseInt((m-a.watermark_x+k)/(a.watermark_width+a.watermark_x_space));a.watermark_x_space=parseInt((m-a.watermark_x+k-a.watermark_width*a.watermark_cols)/(a.watermark_cols-1))}if(a.watermark_rows==0||parseInt(a.watermark_y+a.watermark_height*a.watermark_rows+a.watermark_y_space*(a.watermark_rows-1))>w){a.watermark_rows=parseInt((w-a.watermark_y+_)/(a.watermark_height+a.watermark_y_space));a.watermark_y_space=parseInt((w-a.watermark_y+_-a.watermark_height*a.watermark_rows)/(a.watermark_rows-1))}var f;var c;for(var y=0;y<a.watermark_rows;y++){c=a.watermark_y+(a.watermark_y_space+a.watermark_height)*y;for(var p=0;p<a.watermark_cols;p++){f=a.watermark_x+(a.watermark_width+a.watermark_x_space)*p;var g=document.createElement("div");var v=document.createTextNode(a.watermark_txt);g.appendChild(v);g.id=a.watermark_prefix+y+p;g.style.webkitTransform="rotate(-"+a.watermark_angle+"deg)";g.style.MozTransform="rotate(-"+a.watermark_angle+"deg)";g.style.msTransform="rotate(-"+a.watermark_angle+"deg)";g.style.OTransform="rotate(-"+a.watermark_angle+"deg)";g.style.transform="rotate(-"+a.watermark_angle+"deg)";g.style.visibility="";g.style.position="absolute";g.style.left=f+"px";g.style.top=c+"px";g.style.overflow="hidden";g.style.zIndex=a.watermark_zIndex;g.style.opacity=a.watermark_alpha;g.style.fontSize=a.watermark_fontsize;g.style.fontFamily=a.watermark_font;g.style.color=a.watermark_color;g.style.textAlign="center";g.style.width=a.watermark_width+"px";g.style.height=a.watermark_height+"px";g.style.display="block";g.style["-ms-user-select"]="none";s.appendChild(g)}}};e.init=function(e){window.onload=function(){a(e)};window.onresize=function(){a(e)};if(window.addEventListener){window.addEventListener("DOMContentLoaded",function(){a(e)})}};e.load=function(e){a(e)};e.destroy=function(e){if(e===undefined||e===null){$(".wm_div_class").remove()}else{$("#"+e).remove()}};return e});